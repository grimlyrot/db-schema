model Invite {
  id           String      @id @default(cuid())
  email        String?
  token        String?     @unique
  tokenHash    String?     @unique @map("token_hash")
  scope        RoleScope
  orgId        String?     @map("org_id")
  teamId       String?     @map("team_id")
  status       InviteStatus @default(PENDING)
  invitedById  String?     @map("invited_by_id")
  acceptedById String?     @map("accepted_by_id")
  acceptedAt   DateTime?   @map("accepted_at")
  revokedAt    DateTime?   @map("revoked_at")
  usesLeft     Int         @default(1) @map("uses_left")
  expiresAt    DateTime?   @map("expires_at")
  createdAt    DateTime    @default(now())
  updatedAt    DateTime    @updatedAt

  organization Organization? @relation(fields: [orgId], references: [id])
  team         Team?         @relation(fields: [teamId], references: [id])
  invitedBy    User?         @relation("InviteSent", fields: [invitedById], references: [id])
  acceptedBy   User?         @relation("InviteAccepted", fields: [acceptedById], references: [id])

  @@index([orgId])
  @@index([teamId])
  @@map("invites")
}

model JoinRequest {
  id        String            @id @default(cuid())
  email     String?
  userId    String?           @map("user_id")
  orgId     String            @map("org_id")
  teamId    String?           @map("team_id")
  status    JoinRequestStatus @default(PENDING)
  createdAt DateTime          @default(now())
  updatedAt DateTime          @updatedAt

  user         User?        @relation(fields: [userId], references: [id])
  organization Organization @relation(fields: [orgId], references: [id])
  team         Team?        @relation(fields: [teamId], references: [id])

  @@index([orgId])
  @@index([teamId])
  @@map("join_requests")
}
