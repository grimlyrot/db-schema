model Push {
  id             String        @id @default(cuid())
  isActive       Boolean       @default(true) @map("is_active")
  name           String
  color          String
  url            String?

  timeAfterEvent Int?          @map("time_after_event")
  eventType      EventType?    @map("event_type")

  eventRepeatStrategy    EventRepeatStrategy? @map("event_repeat_strategy")
  eventRepeatCount       Int?                @map("event_repeat_count")
  eventRepeatIntervalMin Int?                @map("event_repeat_interval_min")
  stopOnEvent            EventType?          @map("stop_on_event")
  stopOnEventWindowMin   Int?                @map("stop_on_event_window_min")

  pushType       PushType      @map("push_type")
  dateTime       DateTime?     @map("date_time")
  sendTime       String[]      @map("send_time")
  pushWeekdays   PushWeekday[]
  entireTime     Boolean       @default(false) @map("entire_time")
  startDate      DateTime?     @map("start_date")
  endDate        DateTime?     @map("end_date")
  authorId       String        @map("author_id")
  createdAt      DateTime      @default(now())
  updatedAt      DateTime      @updatedAt
  author         User          @relation(fields: [authorId], references: [id])
  organization   Organization  @relation(fields: [orgId], references: [id])
  orgId          String        @map("org_id")
  team           Team          @relation(fields: [teamId], references: [id])
  teamId         String        @map("team_id")
  pushContent    PushContent?
  pushFilters    PushFilter?
  targets        PushTargetPwa[]

  @@index([teamId])
  @@index([authorId])
}

model PushTargetPwa {
  pushId    String   @map("push_id")
  pwaId     String   @map("pwa_id")
  createdAt DateTime @default(now())

  push Push @relation(fields: [pushId], references: [id], onDelete: Cascade)
  pwa  Pwa  @relation(fields: [pwaId], references: [id], onDelete: Cascade)

  @@id([pushId, pwaId])
  @@index([pwaId])
  @@map("push_target_pwas")
}
